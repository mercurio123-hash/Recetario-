[8:47 p.¬†m., 8/1/2026] Julio C√©sar V√°zquez Lucas: <!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mis Recetas 365</title>
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="manifest" href="manifest.json">
    <style>
        :root {
            --color-A: #FF9800; --color-C: #4CAF50; --color-CE: #2196F3; --color-P: #E91E63;
        }
        body { font-family: 'Segoe UI', sans-serif; background: #f0f2f5; margin: 0; padding-bottom: 90px; }
        header { background: #333; color: white; text-align: center; padding: 10px; position: sticky; top: 0; z-index: 100; }
        
        .nav-tabs { display: flex; background: white; overflow-x: auto; border-bottom: 2px solid #ddd; }
        .t‚Ä¶
[9:35 p.¬†m., 8/1/2026] Julio C√©sar V√°zquez Lucas: https://www.instagram.com/reel/DSGNeG7E21R/?igsh=MWo4dHlhOGw0ejdtZg==
Manifest del recetario, sin cambios
[12:47 a.¬†m., 10/1/2026] Julio C√©sar V√°zquez Lucas: https://mercurio123-hash.github.io/Recetario-/
[12:54 a.¬†m., 10/1/2026] Julio C√©sar V√°zquez Lucas: <!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>365 Recetas: El Reto</title>
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="manifest" href="manifest.json">
    <style>
        :root {
            --color-A: #FF9800; --color-C: #4CAF50; --color-CE: #2196F3; --color-P: #E91E63;
        }
        body { font-family: 'Segoe UI', sans-serif; background: #f0f2f5; margin: 0; padding-bottom: 90px; }
        header { background: #333; color: white; text-align: center; padding: 10px; position: sticky; top: 0; z-index: 100; }
        
        .nav-tabs { display: flex; background: white; overflow-x: auto; border-bottom: 2px solid #ddd; }
        .tab { flex: 1; padding: 15px; border: none; background: none; font-weight: bold; cursor: pointer; min-width: 85px; font-size: 14px; }
        .tab[data-cat="A"] { color: var(--color-A); } .tab[data-cat="C"] { color: var(--color-C); }
        .tab[data-cat="CE"] { color: var(--color-CE); } .tab[data-cat="P"] { color: var(--color-P); }
        .tab.active { border-bottom: 4px solid currentColor; background: #f9f9f9; }

        .container { padding: 15px; }
        .search-box { width: 100%; padding: 12px; margin-bottom: 15px; border: 1px solid #ccc; border-radius: 25px; box-sizing: border-box; font-size: 16px; outline: none; }

        .card { background: white; border-radius: 12px; padding: 15px; margin-bottom: 15px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); border-left: 8px solid #ccc; position: relative; }
        .card.cat-A { border-left-color: var(--color-A); }
        .card.cat-C { border-left-color: var(--color-C); }
        .card.cat-CE { border-left-color: var(--color-CE); }
        .card.cat-P { border-left-color: var(--color-P); }
        
        .badge { position: absolute; top: 10px; right: 10px; background: #333; color: white; padding: 2px 8px; border-radius: 4px; font-size: 11px; }
        .btn-del { background: #ffeded; color: #d32f2f; border: none; padding: 5px 10px; border-radius: 5px; float: right; margin-top: -5px; font-size: 12px; cursor: pointer; }
        .btn-add-list { background: #f0f0f0; border: none; padding: 10px; border-radius: 8px; width: 100%; margin-top: 10px; font-weight: bold; }

        .panel { display: none; background: white; padding: 20px; border-radius: 15px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        input, textarea, select { width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; }
        
        .dif-group { display: flex; justify-content: space-between; margin: 10px 0; }
        .dif-opt { font-size: 14px; }
        .tag-pill { background: #e0e0e0; border-radius: 15px; padding: 2px 10px; font-size: 11px; margin-right: 5px; display: inline-block; margin-top: 5px; }

        .btn-main { background: #333; color: white; border: none; width: 100%; padding: 15px; border-radius: 8px; font-size: 16px; margin-top: 10px; }
        .bottom-nav { position: fixed; bottom: 0; width: 100%; background: #333; display: flex; justify-content: space-around; padding: 12px 0; z-index: 100; }
        .btn-nav { color: white; border: none; background: none; text-align: center; font-size: 12px; opacity: 0.8; }
        .btn-nav span { display: block; font-size: 20px; margin-bottom: 2px; }
    </style>
</head>
<body>

<header>
    <h2 id="view-title">365 Recetas</h2>
</header>

<nav class="nav-tabs">
    <button class="tab active" data-cat="A" onclick="cambiarVista('A')">Alm.</button>
    <button class="tab" data-cat="C" onclick="cambiarVista('C')">Com.</button>
    <button class="tab" data-cat="CE" onclick="cambiarVista('CE')">Cenas</button>
    <button class="tab" data-cat="P" onclick="cambiarVista('P')">Otros</button>
</nav>

<div class="container">
    <input type="text" id="buscador" class="search-box" placeholder="üîç Buscar por nombre, ingrediente o tag..." oninput="renderRecetas()">

    <div id="app"></div>

    <div id="form-area" class="panel">
        <h3>‚ûï Nueva Receta</h3>
        <select id="f-cat">
            <option value="A">Almuerzo</option>
            <option value="C" selected>Comida</option>
            <option value="CE">Cena</option>
            <option value="P">Postres y Otros</option>
        </select>
        <input type="text" id="f-titulo" placeholder="T√≠tulo de la receta">
        
        <label style="font-size: 14px; font-weight: bold;">Dificultad:</label>
        <div class="dif-group">
            <label class="dif-opt"><input type="radio" name="dificultad" value="F√°cil" checked> F√°cil</label>
            <label class="dif-opt"><input type="radio" name="dificultad" value="Media"> Media</label>
            <label class="dif-opt"><input type="radio" name="dificultad" value="Dif√≠cil"> Dif√≠cil</label>
        </div>

        <input type="text" id="f-tiempo" placeholder="Tiempo total (ej: 45 min)">
        <textarea id="f-ing" rows="3" placeholder="Ingredientes (uno por l√≠nea)"></textarea>
        <textarea id="f-prep" rows="3" placeholder="Pasos de preparaci√≥n"></textarea>
        <input type="text" id="f-tags" placeholder="Tags (ej: ensalada, pollo, ligero)">
        <input type="number" id="f-cal" placeholder="Calor√≠as aprox.">
        
        <button class="btn-main" onclick="guardarReceta()">Guardar Receta</button>
    </div>

    <div id="lista-area" class="panel">
        <h3>üõí Lista de Compras</h3>
        <div id="lista-items"></div>
        <button class="btn-main" style="background:#d32f2f" onclick="borrarLista()">Vaciar Lista</button>
    </div>

    <div id="ajustes-area" class="panel">
        <h3>‚öôÔ∏è Copia de Seguridad</h3>
        <button class="btn-main" style="background:#2196F3" onclick="exportarRecetas()">üì• Descargar Backup</button>
        <hr>
        <input type="file" id="importFile" accept=".json">
        <button class="btn-main" style="background:#4CAF50" onclick="importarRecetas()">üì§ Cargar Backup</button>
    </div>
</div>

<nav class="bottom-nav">
    <button class="btn-nav" onclick="cambiarVista(currentCat)"><span>üè†</span>Inicio</button>
    <button class="btn-nav" onclick="mostrarPanel('form-area', 'Nueva Receta')"><span>‚ûï</span>A√±adir</button>
    <button class="btn-nav" onclick="mostrarPanel('lista-area', 'Compras')"><span>üõí</span>Lista</button>
    <button class="btn-nav" onclick="mostrarPanel('ajustes-area', 'Ajustes')"><span>‚öôÔ∏è</span>Backup</button>
</nav>

<script>
    let currentCat = 'A';
    let recetas = JSON.parse(localStorage.getItem('recetas_365_v3')) || [];
    let listaCompras = JSON.parse(localStorage.getItem('lista_365_v3')) || [];

    function cambiarVista(cat) {
        currentCat = cat;
        document.querySelectorAll('.panel').forEach(p => p.style.display = 'none');
        document.getElementById('app').style.display = 'block';
        document.getElementById('buscador').style.display = 'block';
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        
        // Corregido: Buscar el bot√≥n con el data-cat exacto
        const activeTab = document.querySelector(.tab[data-cat="${cat}"]);
        if(activeTab) activeTab.classList.add('active');
        
        const titulos = { 'A': 'Almuerzos', 'C': 'Comidas', 'CE': 'Cenas', 'P': 'Postres y Otros' };
        document.getElementById('view-title').innerText = "365: " + titulos[cat];
        renderRecetas();
    }

    function mostrarPanel(id, titulo) {
        document.getElementById('app').style.display = 'none';
        document.getElementById('buscador').style.display = 'none';
        document.querySelectorAll('.panel').forEach(p => p.style.display = 'none');
        document.getElementById(id).style.display = 'block';
        document.getElementById('view-title').innerText = titulo;
    }

    function renderRecetas() {
        const app = document.getElementById('app');
        const query = document.getElementById('buscador').value.toLowerCase();
        app.innerHTML = '';

        const filtradas = recetas.filter(r => {
            const matchesCat = r.categoria === currentCat;
            const searchSource = (r.titulo + r.ingredientes + (r.tags || "")).toLowerCase();
            return matchesCat && searchSource.includes(query);
        });

        if(filtradas.length === 0) {
            app.innerHTML = '<p style="text-align:center; padding:20px; color:#888;">No hay recetas aqu√≠ todav√≠a.</p>';
        }

        filtradas.forEach(r => {
            const card = document.createElement('div');
            card.className = card cat-${r.categoria};
            const difIcon = r.dificultad === 'F√°cil' ? 'üü¢' : (r.dificultad === 'Media' ? 'üü°' : 'üî¥');
            
            card.innerHTML = `
                <button class="btn-del" onclick="borrarReceta('${r.id}')">Eliminar üóëÔ∏è</button>
                <span class="badge">${r.id}</span>
                <h3 style="margin:0 0 5px 0">${r.titulo}</h3>
                <div style="font-size:12px; margin-bottom:10px;">
                    ${difIcon} <strong>${r.dificultad}</strong> | ‚è±Ô∏è ${r.tiempo || '--'}
                </div>
                <p style="font-size:14px"><strong>Ingredientes:</strong><br>${r.ingredientes.replace(/\n/g, '<br>')}</p>
                <p style="font-size:14px; background:#f9f9f9; padding:8px; border-radius:5px;"><strong>Preparaci√≥n:</strong><br>${r.preparacion}</p>
                <div>${(r.tags || "").split(',').map(t => t.trim() ? <span class="tag-pill">#${t.trim()}</span> : '').join('')}</div>
                <div style="font-size:11px; color:#777; margin-top:10px;">üìÖ ${r.fecha} | üî• ${r.calorias} kcal</div>
                <button class="btn-add-list" onclick="agregarALista('${r.id}')">üõí A√±adir a Compras</button>
            `;
            app.appendChild(card);
        });
    }

    function guardarReceta() {
        const cat = document.getElementById('f-cat').value;
        const difEl = document.querySelector('input[name="dificultad"]:checked');
        const dif = difEl ? difEl.value : "F√°cil";
        const num = recetas.filter(r => r.categoria === cat).length + 1;
        
        const nueva = {
            id: ${cat}-${num},
            categoria: cat,
            titulo: document.getElementById('f-titulo').value || 'Sin t√≠tulo',
            dificultad: dif,
            tiempo: document.getElementById('f-tiempo').value,
            ingredientes: document.getElementById('f-ing').value || '',
            preparacion: document.getElementById('f-prep').value || '',
            tags: document.getElementById('f-tags').value || '',
            calorias: document.getElementById('f-cal').value || 0,
            fecha: new Date().toLocaleDateString()
        };

        recetas.push(nueva);
        actualizarLocal();
        ['f-titulo','f-tiempo','f-ing','f-prep','f-tags','f-cal'].forEach(id => document.getElementById(id).value = '');
        cambiarVista(cat);
    }

    function borrarReceta(id) {
        if(confirm(¬øBorrar la receta ${id}?)) {
            recetas = recetas.filter(r => r.id !== id);
            actualizarLocal();
            renderRecetas();
        }
    }

    function agregarALista(id) {
        const r = recetas.find(rec => rec.id === id);
        if(r) {
            listaCompras.push({ titulo: r.titulo, ing: r.ingredientes });
            localStorage.setItem('lista_365_v3', JSON.stringify(listaCompras));
            alert("A√±adido a la lista");
        }
    }

    function borrarLista() {
        if(confirm("¬øVaciar lista?")) {
            listaCompras = [];
            localStorage.setItem('lista_365_v3', JSON.stringify(listaCompras));
            mostrarPanel('lista-area', 'Compras');
            document.getElementById('lista-items').innerHTML = '';
        }
    }

    function actualizarLocal() {
        localStorage.setItem('recetas_365_v3', JSON.stringify(recetas));
    }

    function exportarRecetas() {
        const blob = new Blob([JSON.stringify(recetas, null, 2)], {type : 'application/json'});
        const a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        a.download = backup_365_recetas.json;
        a.click();
    }

    function importarRecetas() {
        const file = document.getElementById('importFile').files[0];
        if (!file) return;
        const reader = new FileReader();
        reader.onload = (e) => {
            try {
                recetas = JSON.parse(e.target.result);
                actualizarLocal();
                alert("¬°Restaurado correctamente!");
                cambiarVista('A');
            } catch(err) {
                alert("Error al leer el archivo.");
            }
        };
        reader.readAsText(file);
    }

    // Iniciar en Almuerzos
    cambiarVista('A');
</script>
</body>
</html>